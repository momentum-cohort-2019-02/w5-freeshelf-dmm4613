{% extends "base.html" %}

{% block content %}

<div>
    <div class="category_list">
        <h4>Books by category: 
        {% if category_list %}
            {% for category in category_list %}
                <a class="dim dark-blue" href="{{ category.get_absolute_url }}" >{{ category.name }}</a>
                {% if not forloop.last %} | {% endif %}
            {% endfor %}
        {% endif %}
       </h4>
    </div>
    <div>
   
        <h2>Recently added books</h2>
                {% if book_list %}
                <ul class="list flex ">
                    {% for book in book_list %}
                        <li class="b--solid ma1">
                            <a class="f3 dim dark-blue" target='_blank' href="{{ book.book_url }}">{{ book.title }}</a>
                            {% if book.author|wordcount != 0 %}
                                by {{ book.author }}
                            {% endif %}
                            <p>{{ book.description|truncatewords:50 }}</p>
                            {% if book.favorited %}
                                <p> {{ book.favorited }} | {{ book.date_added }} | {{ book.category.get }}
                            {% else %}
                                <p> {{ book.date_added }} | {{ book.category.get }}
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p>There are no books on the site.</p> 
                {% endif %}
    </div>
</div>

{% endblock %}
